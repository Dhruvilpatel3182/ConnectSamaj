{% extends "base.html" %}
{% block content %}

<div class="text-center my-4">
    <h1 class="fw-bold text-primary">Welcome to Samaj Seva! ğŸ‰</h1>
    <p class="text-muted">Community Management System</p>
</div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4575841956746799"
     crossorigin="anonymous"></script>
<!-- User Info Card -->
<div class="card border-0 shadow-sm mb-4" style="background: linear-gradient(135deg, #0b6, #084); color: #fff;">
    <div class="card-body d-flex flex-wrap justify-content-between align-items-center">
        <div>
            <h4 class="mb-1">Welcome, {{ session.username }} ğŸ‘‹</h4>
            <p class="mb-0">
                <strong>Role:</strong> {{ session.role|title }}
                {% if session.village %}
                    â€¢ <strong>Village:</strong> {{ session.village }}
                {% endif %}
            </p>
        </div>
        <div class="bg-white bg-opacity-25 px-3 py-2 rounded-3">
            <small>Last Login: Today</small>
        </div>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row g-3">
    <div class="col-6 col-md-3">
        <div class="card text-center text-white shadow-sm" style="background: linear-gradient(135deg, #0b6, #084);">
            <div class="card-body">
                <div class="fs-2 mb-2">ğŸ </div>
                <h6>Families</h6>
                <h3 class="fw-bold">{{ families_count }}</h3>
            </div>
        </div>
    </div>

    <div class="col-6 col-md-3">
        <div class="card text-center text-white shadow-sm" style="background: linear-gradient(135deg, #3498db, #2980b9);">
            <div class="card-body">
                <div class="fs-2 mb-2">ğŸ‘¥</div>
                <h6>Members</h6>
                <h3 class="fw-bold">{{ members_count }}</h3>
            </div>
        </div>
    </div>

    <div class="col-6 col-md-3">
        <div class="card text-center text-white shadow-sm" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
            <div class="card-body">
                <div class="fs-2 mb-2">ğŸ“…</div>
                <h6>Events</h6>
                <h3 class="fw-bold">{{ events_count }}</h3>
            </div>
        </div>
    </div>

    {% if session.role == 'admin' %}
    <div class="col-6 col-md-3">
        <div class="card text-center text-white shadow-sm" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
            <div class="card-body">
                <div class="fs-2 mb-2">ğŸ˜ï¸</div>
                <h6>Villages</h6>
                <h3 class="fw-bold">{{ villages_count }}</h3>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Quick Actions Section -->
<div class="card shadow-sm border-0 mt-4">
    <div class="card-body">
        <h4 class="mb-3">ğŸš€ Quick Actions</h4>
        <div class="row g-3">
            {% if session.role == 'admin' %}
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('user_villages') }}" class="btn w-100 py-3 text-white" style="background: #667eea;">
                        ğŸ˜ï¸<br><strong>View Villages</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('families') }}" class="btn w-100 py-3 text-white" style="background: #0b6;">
                        ğŸ <br><strong>Manage Families</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('view_members') }}" class="btn w-100 py-3 text-white" style="background: #3498db;">
                        ğŸ‘¥<br><strong>Manage Members</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('add_family') }}" class="btn w-100 py-3 text-white" style="background: #9b59b6;">
                        â•<br><strong>Add Family</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('add_member') }}" class="btn w-100 py-3 text-white" style="background: #e67e22;">
                        ğŸ‘¤<br><strong>Add Member</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('add_event') }}" class="btn w-100 py-3 text-white" style="background: #e74c3c;">
                        ğŸ“…<br><strong>Add Event</strong>
                    </a>
                </div>
            {% else %}
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('user_villages') }}" class="btn w-100 py-3 text-white" style="background: #667eea;">
                        ğŸ˜ï¸<br><strong>View Villages</strong>
                    </a>
                </div>
                {% if session.village %}
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('user_families', village_name=session.village) }}" class="btn w-100 py-3 text-white" style="background: #0b6;">
                        ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦<br><strong>View Families</strong>
                    </a>
                </div>
                {% endif %}
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('view_events') }}" class="btn w-100 py-3 text-white" style="background: #9b59b6;">
                        ğŸ“…<br><strong>View Events</strong>
                    </a>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="{{ url_for('add_event') }}" class="btn w-100 py-3 text-white" style="background: #e74c3c;">
                        â•<br><strong>Add Event</strong>
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

{% if session.role == 'admin' %}
<div class="card border-0 shadow-sm mt-4">
    <div class="card-body">
        <h4 class="mb-3 text-danger">âš™ï¸ Admin Tools</h4>
        <div class="row g-2">
            <div class="col-6 col-md-4 col-lg-3">
                <a href="{{ url_for('manage_users') }}" class="btn w-100 btn-danger">ğŸ‘¥ Manage Users</a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="{{ url_for('manage_villages') }}" class="btn w-100 btn-danger">ğŸ˜ï¸ Manage Villages</a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="{{ url_for('families') }}" class="btn w-100 btn-success">ğŸ  All Families</a>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
                <a href="{{ url_for('view_members') }}" class="btn w-100 btn-primary">ğŸ‘¥ All Members</a>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if session.role != 'admin' %}
<div class="alert alert-warning mt-4">
    ğŸ“ <strong>Need to make changes?</strong><br>
    Only administrators can edit or delete family/member data. Please contact your admin for updates.
</div>
{% endif %}

{% endblock %}
